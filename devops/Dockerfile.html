<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前言 | kikfan</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css">
    <meta name="description" content="kikfan">
    
    <link rel="preload" href="/assets/css/2.styles.051e8285.css" as="style"><link rel="preload" href="/assets/js/app.7ba23871.js" as="script"><link rel="preload" href="/assets/js/4.292afecb.js" as="script"><link rel="preload" href="/assets/js/57.bd724fda.js" as="script"><link rel="prefetch" href="/assets/js/0.71ac8a33.js"><link rel="prefetch" href="/assets/js/1.73a5aad3.js"><link rel="prefetch" href="/assets/js/10.7d07b3d9.js"><link rel="prefetch" href="/assets/js/100.b78e7802.js"><link rel="prefetch" href="/assets/js/101.eaaca020.js"><link rel="prefetch" href="/assets/js/102.e9fc2421.js"><link rel="prefetch" href="/assets/js/103.84b8256b.js"><link rel="prefetch" href="/assets/js/104.7abfc617.js"><link rel="prefetch" href="/assets/js/105.1ec4b862.js"><link rel="prefetch" href="/assets/js/106.4dc5c980.js"><link rel="prefetch" href="/assets/js/107.f0c7db52.js"><link rel="prefetch" href="/assets/js/108.08f59a3c.js"><link rel="prefetch" href="/assets/js/109.69c05321.js"><link rel="prefetch" href="/assets/js/11.00e72e41.js"><link rel="prefetch" href="/assets/js/110.ad744d2f.js"><link rel="prefetch" href="/assets/js/111.671aa3c1.js"><link rel="prefetch" href="/assets/js/112.1c3d4a67.js"><link rel="prefetch" href="/assets/js/113.5a9cc600.js"><link rel="prefetch" href="/assets/js/114.53f104e5.js"><link rel="prefetch" href="/assets/js/115.fe4a33ef.js"><link rel="prefetch" href="/assets/js/116.fbaba654.js"><link rel="prefetch" href="/assets/js/117.4760778b.js"><link rel="prefetch" href="/assets/js/118.c363137e.js"><link rel="prefetch" href="/assets/js/119.40023660.js"><link rel="prefetch" href="/assets/js/12.9e171cb9.js"><link rel="prefetch" href="/assets/js/13.cd8fcd89.js"><link rel="prefetch" href="/assets/js/14.90383661.js"><link rel="prefetch" href="/assets/js/15.7983900e.js"><link rel="prefetch" href="/assets/js/16.c7356a60.js"><link rel="prefetch" href="/assets/js/17.9a1808e6.js"><link rel="prefetch" href="/assets/js/18.c5563e15.js"><link rel="prefetch" href="/assets/js/19.d7201705.js"><link rel="prefetch" href="/assets/js/20.5e56f1c1.js"><link rel="prefetch" href="/assets/js/21.c8edd285.js"><link rel="prefetch" href="/assets/js/22.b307b325.js"><link rel="prefetch" href="/assets/js/23.d86fefa7.js"><link rel="prefetch" href="/assets/js/24.3090c415.js"><link rel="prefetch" href="/assets/js/25.3f243d05.js"><link rel="prefetch" href="/assets/js/26.679cdac7.js"><link rel="prefetch" href="/assets/js/27.14ec9c1d.js"><link rel="prefetch" href="/assets/js/28.00888fd6.js"><link rel="prefetch" href="/assets/js/29.7e638fe3.js"><link rel="prefetch" href="/assets/js/30.11c16ad0.js"><link rel="prefetch" href="/assets/js/31.98f65567.js"><link rel="prefetch" href="/assets/js/32.2b207cba.js"><link rel="prefetch" href="/assets/js/33.734b44a6.js"><link rel="prefetch" href="/assets/js/34.98cba678.js"><link rel="prefetch" href="/assets/js/35.85322c82.js"><link rel="prefetch" href="/assets/js/36.0dfdb6de.js"><link rel="prefetch" href="/assets/js/37.e01d1d82.js"><link rel="prefetch" href="/assets/js/38.bf77261b.js"><link rel="prefetch" href="/assets/js/39.82242074.js"><link rel="prefetch" href="/assets/js/40.ce99b46f.js"><link rel="prefetch" href="/assets/js/41.f6167dff.js"><link rel="prefetch" href="/assets/js/42.0371d905.js"><link rel="prefetch" href="/assets/js/43.e4a7aef7.js"><link rel="prefetch" href="/assets/js/44.e9827259.js"><link rel="prefetch" href="/assets/js/45.39a67c1d.js"><link rel="prefetch" href="/assets/js/46.8ec6eea4.js"><link rel="prefetch" href="/assets/js/47.2501299d.js"><link rel="prefetch" href="/assets/js/48.8b8e2c1c.js"><link rel="prefetch" href="/assets/js/49.73987abd.js"><link rel="prefetch" href="/assets/js/5.77eb41a0.js"><link rel="prefetch" href="/assets/js/50.5da0bdc9.js"><link rel="prefetch" href="/assets/js/51.d7193f1b.js"><link rel="prefetch" href="/assets/js/52.838622e3.js"><link rel="prefetch" href="/assets/js/53.c55edd2b.js"><link rel="prefetch" href="/assets/js/54.a7498da9.js"><link rel="prefetch" href="/assets/js/55.d1c1d531.js"><link rel="prefetch" href="/assets/js/56.767962cf.js"><link rel="prefetch" href="/assets/js/58.e30ad4aa.js"><link rel="prefetch" href="/assets/js/59.fb235a6d.js"><link rel="prefetch" href="/assets/js/6.38a878ba.js"><link rel="prefetch" href="/assets/js/60.9b1d42be.js"><link rel="prefetch" href="/assets/js/61.d7487a62.js"><link rel="prefetch" href="/assets/js/62.43b6272f.js"><link rel="prefetch" href="/assets/js/63.f2d44dcd.js"><link rel="prefetch" href="/assets/js/64.8499a30e.js"><link rel="prefetch" href="/assets/js/65.3e6c1529.js"><link rel="prefetch" href="/assets/js/66.592e86f2.js"><link rel="prefetch" href="/assets/js/67.e445e4d9.js"><link rel="prefetch" href="/assets/js/68.dcd7d305.js"><link rel="prefetch" href="/assets/js/69.13b6c188.js"><link rel="prefetch" href="/assets/js/7.ec683bf8.js"><link rel="prefetch" href="/assets/js/70.b869aa03.js"><link rel="prefetch" href="/assets/js/71.ec2b9534.js"><link rel="prefetch" href="/assets/js/72.4abbe0f6.js"><link rel="prefetch" href="/assets/js/73.520653fd.js"><link rel="prefetch" href="/assets/js/74.741d03bf.js"><link rel="prefetch" href="/assets/js/75.f8fa8f39.js"><link rel="prefetch" href="/assets/js/76.b0898d02.js"><link rel="prefetch" href="/assets/js/77.7b963dd5.js"><link rel="prefetch" href="/assets/js/78.ad8cc9a2.js"><link rel="prefetch" href="/assets/js/79.c7e1ea38.js"><link rel="prefetch" href="/assets/js/8.8d893786.js"><link rel="prefetch" href="/assets/js/80.eb0ad1ef.js"><link rel="prefetch" href="/assets/js/81.e0c19f99.js"><link rel="prefetch" href="/assets/js/82.6cc53328.js"><link rel="prefetch" href="/assets/js/83.ff50c6c3.js"><link rel="prefetch" href="/assets/js/84.b162976e.js"><link rel="prefetch" href="/assets/js/85.0b2daa96.js"><link rel="prefetch" href="/assets/js/86.05573bf9.js"><link rel="prefetch" href="/assets/js/87.7387cbea.js"><link rel="prefetch" href="/assets/js/88.82f7c592.js"><link rel="prefetch" href="/assets/js/89.a3454ab0.js"><link rel="prefetch" href="/assets/js/9.a76687b6.js"><link rel="prefetch" href="/assets/js/90.a4c9c606.js"><link rel="prefetch" href="/assets/js/91.9eb2d87b.js"><link rel="prefetch" href="/assets/js/92.e1c96baa.js"><link rel="prefetch" href="/assets/js/93.c3c1d09b.js"><link rel="prefetch" href="/assets/js/94.a4eae7c6.js"><link rel="prefetch" href="/assets/js/95.b4f4169a.js"><link rel="prefetch" href="/assets/js/96.9d93198c.js"><link rel="prefetch" href="/assets/js/97.ee4e7ec3.js"><link rel="prefetch" href="/assets/js/98.7638cc88.js"><link rel="prefetch" href="/assets/js/99.5aa73200.js">
    <link rel="stylesheet" href="/assets/css/2.styles.051e8285.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">kikfan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/idea/" class="nav-link">
  IDEA
</a></div><div class="nav-item"><a href="/devops/" class="nav-link router-link-active">
  DevOps
</a></div><div class="nav-item"><a href="/web/" class="nav-link">
  Web
</a></div><div class="nav-item"><a href="/curiousness/" class="nav-link">
  好奇尚异
</a></div><div class="nav-item"><a href="/long-road/" class="nav-link">
  道阻且长
</a></div><div class="nav-item"><a href="/step-back/" class="nav-link">
  海阔天空
</a></div><div class="nav-item"><a href="/experience/" class="nav-link">
  吃堑长智
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  Tools
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/idea/" class="nav-link">
  IDEA
</a></div><div class="nav-item"><a href="/devops/" class="nav-link router-link-active">
  DevOps
</a></div><div class="nav-item"><a href="/web/" class="nav-link">
  Web
</a></div><div class="nav-item"><a href="/curiousness/" class="nav-link">
  好奇尚异
</a></div><div class="nav-item"><a href="/long-road/" class="nav-link">
  道阻且长
</a></div><div class="nav-item"><a href="/step-back/" class="nav-link">
  海阔天空
</a></div><div class="nav-item"><a href="/experience/" class="nav-link">
  吃堑长智
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  Tools
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>DevOps</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/devops/Auto Vim.html" class="sidebar-link">Auto Vim</a></li><li><a href="/devops/Docker  安装系列.html" class="sidebar-link">Docker  安装系列</a></li><li><a href="/devops/Dockerfile.html" aria-current="page" class="active sidebar-link">Dockerfile</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/devops/Dockerfile.html#前言" class="sidebar-link">前言</a></li></ul></li><li><a href="/devops/Linux.html" class="sidebar-link">Linux</a></li><li><a href="/devops/Travis-CI持续集成.html" class="sidebar-link">Travis-CI持续集成</a></li><li><a href="/devops/Vim.html" class="sidebar-link">Vim</a></li><li><a href="/devops/docker.html" class="sidebar-link">docker</a></li><li><a href="/devops/goaccess.html" class="sidebar-link">goaccess</a></li><li><a href="/devops/配置 https 网站.html" class="sidebar-link">配置 https 网站</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p><strong>FROM：指定一个镜像，必须为第一个命令</strong></p> <p>FROM指令是最重要的一个且必须为 <code>DockerFile</code> 文件开篇的第一个非注释行，用于为映像文件构建过程指定基准镜像，后续的指令运行于此基准镜像所提供的运行环境。</p> <p>实践中，基准镜像可以是任何可用镜像文件，默认情况下，<code>docker build</code> 会在 <code>docker</code> 主机上查找指定的镜像文件，在其不存在时，则会从 <code>docker Hub Registry</code> 上拉取所需的镜像文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
　　FROM <span class="token operator">&lt;</span>image<span class="token operator">&gt;</span>
　　FROM <span class="token operator">&lt;</span>image<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>tag<span class="token operator">&gt;</span>
　　FROM <span class="token operator">&lt;</span>image<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>digest<span class="token operator">&gt;</span>
示例：
　　FROM mysql:5.6
注：
　　tag或digest是可选的，如果不使用这两个值时，会使用latest版本的基础镜像
</code></pre></div><h5 id="maintainer-维护者信息-还可以使用-label-指定各种元格式指定-maintainer"><a href="#maintainer-维护者信息-还可以使用-label-指定各种元格式指定-maintainer" class="header-anchor">#</a> **MAINTAINER：**维护者信息，还可以使用 <code>LABEL</code> 指定各种元格式指定 <code>maintainer</code></h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    MAINTAINER <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>
示例：
    MAINTAINER Jasper Xu
    MAINTAINER sorex@163.com
    MAINTAINER Jasper Xu <span class="token operator">&lt;</span>sorex@163.com<span class="token operator">&gt;</span>
</code></pre></div><h5 id="copy-功能类似add-但是是不会自动解压文件-也不能访问网络资源"><a href="#copy-功能类似add-但是是不会自动解压文件-也不能访问网络资源" class="header-anchor">#</a> <strong>COPY</strong>：功能类似ADD，但是是不会自动解压文件，也不能访问网络资源</h5> <p>用于从 <strong>Docker</strong> 主机复制文件至创建的新映像文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    COPY <span class="token operator">&lt;</span>src<span class="token operator">&gt;</span><span class="token punctuation">..</span>. <span class="token operator">&lt;</span>dest<span class="token operator">&gt;</span>
    COPY <span class="token punctuation">[</span><span class="token string">&quot;&lt;src&gt;&quot;</span>,<span class="token punctuation">..</span>. <span class="token string">&quot;&lt;dest&gt;&quot;</span><span class="token punctuation">]</span> 用于支持包含空格的路径
     <span class="token operator">&lt;</span>src<span class="token operator">&gt;</span>:要复制的源文件或目录，支持使用通配符
     <span class="token operator">&lt;</span>dest<span class="token operator">&gt;</span>：目标路径，即正在创建的image的文件系统路径；建议为<span class="token operator">&lt;</span>dest<span class="token operator">&gt;</span>使用绝对路径，否则，COPY指定则以WORKDIR为其起始路径；
      注意：在路径中有空白字符时，通常使用第二种格式
文件复制准则
 <span class="token operator">&lt;</span>src<span class="token operator">&gt;</span>必须是build上下文中的路径，不能是其父目录中的文件
 如果<span class="token operator">&lt;</span>src<span class="token operator">&gt;</span>是目录，则其内部文件或子目录会被递归复制，但<span class="token operator">&lt;</span>src<span class="token operator">&gt;</span>目录自身不会被复制
 如果指定了多个<span class="token operator">&lt;</span>src<span class="token operator">&gt;</span>，或在<span class="token operator">&lt;</span>src<span class="token operator">&gt;</span>中使用了通配符，则<span class="token operator">&lt;</span>dest<span class="token operator">&gt;</span>必须是一个目录，且必须以/结尾
 如果<span class="token operator">&lt;</span>dest<span class="token operator">&gt;</span>事先不存在，他将会被自动创建，这包括其父目录路径
</code></pre></div><h5 id="add-将本地文件添加到容器中-tar-类型文件会自动解压-网络压缩资源不会被解压-可以访问网络资源-类似-wget"><a href="#add-将本地文件添加到容器中-tar-类型文件会自动解压-网络压缩资源不会被解压-可以访问网络资源-类似-wget" class="header-anchor">#</a> **ADD：**将本地文件添加到容器中，<strong>tar</strong> 类型文件会自动解压(网络压缩资源不会被解压)，可以访问网络资源，类似 <strong>wget</strong></h5> <h5 id="workdir-工作目录-类似于cd-命令"><a href="#workdir-工作目录-类似于cd-命令" class="header-anchor">#</a> <strong>WORKDIR：<strong>工作目录，类似于</strong>cd</strong> 命令</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    WORKDIR /path/to/workdir
示例：
    WORKDIR /a  <span class="token punctuation">(</span>这时工作目录为/a<span class="token punctuation">)</span>
    WORKDIR b  <span class="token punctuation">(</span>这时工作目录为/a/b<span class="token punctuation">)</span>
    WORKDIR c  <span class="token punctuation">(</span>这时工作目录为/a/b/c<span class="token punctuation">)</span>
注：
　　通过WORKDIR设置工作目录后，Dockerfile中其后的命令RUN、CMD、ENTRYPOINT、ADD、COPY等命令都会在该目录下执行。在使用docker run运行容器时，可以通过-w参数覆盖构建时所设置的工作目录。
</code></pre></div><h5 id="volume-用于指定持久化目录-指定卷-注意在-dockerfile-中只能指定基于-docker-管理的卷"><a href="#volume-用于指定持久化目录-指定卷-注意在-dockerfile-中只能指定基于-docker-管理的卷" class="header-anchor">#</a> **VOLUME：**用于指定持久化目录（指定卷，注意在 <code>dockerfile</code> 中只能指定基于 <code>docker</code> 管理的卷）</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    VOLUME <span class="token punctuation">[</span><span class="token string">&quot;/path/to/dir&quot;</span><span class="token punctuation">]</span>
示例：
    VOLUME <span class="token punctuation">[</span><span class="token string">&quot;/data&quot;</span><span class="token punctuation">]</span>
    VOLUME <span class="token punctuation">[</span><span class="token string">&quot;/var/www&quot;</span>, <span class="token string">&quot;/var/log/apache2&quot;</span>, <span class="token string">&quot;/etc/apache2&quot;</span>
注：
　　一个卷可以存在于一个或多个容器的指定目录，该目录可以绕过联合文件系统，并具有以下功能：
卷可以容器间共享和重用
容器并不一定要和其它容器共享卷
修改卷后会立即生效
对卷的修改不会对镜像产生影响
卷会一直存在，直到没有任何容器在使用它
</code></pre></div><h5 id="expose-用于为容器打开指定要监听的端口以实现与外部通信"><a href="#expose-用于为容器打开指定要监听的端口以实现与外部通信" class="header-anchor">#</a> **EXPOSE：**用于为容器打开指定要监听的端口以实现与外部通信</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    EXPOSE <span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>port<span class="token operator">&gt;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
示例：
    EXPOSE <span class="token number">80</span> <span class="token number">443</span>
    EXPOSE <span class="token number">8080</span>
    EXPOSE <span class="token number">11211</span>/tcp <span class="token number">11211</span>/udp
注：
　　EXPOSE并不会让容器的端口访问到主机。要使其可访问，需要在docker run运行容器时通过-p来发布这些端口，或通过-P参数来发布EXPOSE导出的所有端口
　　镜像中指定的是待暴露的端口是隐藏的，需要加上大写的-P选项，也可以自定义
</code></pre></div><h5 id="env-设置环境变量-用于为镜像定义所需的环境变量-并可被-dockerfile-文件中位于其后的其他指令所调用"><a href="#env-设置环境变量-用于为镜像定义所需的环境变量-并可被-dockerfile-文件中位于其后的其他指令所调用" class="header-anchor">#</a> **ENV：**设置环境变量，用于为镜像定义所需的环境变量，并可被 <code>DockerFile</code> 文件中位于其后的其他指令所调用</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    ENV <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>  <span class="token comment">##&lt;key&gt;之后的所有内容均会被视为其&lt;value&gt;的组成部分，因此，一次只能设置一个变量</span>
    ENV <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">=</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> <span class="token punctuation">..</span>.  <span class="token comment">##可以设置多个变量，每个变量为一个&quot;&lt;key&gt;=&lt;value&gt;&quot;的键值对，如果&lt;key&gt;中包含空格，可以使用\来进行转义，也可以通过&quot;&quot;来进行标示；另外，反斜线也可以用于续行</span>
示例：
    ENV myName John Doe
    ENV myDog Rex The Dog
    ENV <span class="token assign-left variable">myCat</span><span class="token operator">=</span>fluffy
</code></pre></div><h5 id="run-构建镜像时执行的命令"><a href="#run-构建镜像时执行的命令" class="header-anchor">#</a> **RUN：**构建镜像时执行的命令</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>RUN用于在镜像容器中执行命令，其有以下两种命令执行方式：
shell执行
格式：
    RUN <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span>
exec执行
格式：
    RUN <span class="token punctuation">[</span><span class="token string">&quot;executable&quot;</span>, <span class="token string">&quot;param1&quot;</span>, <span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span>
示例：
    RUN <span class="token punctuation">[</span><span class="token string">&quot;executable&quot;</span>, <span class="token string">&quot;param1&quot;</span>, <span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span>
    RUN apk update
    RUN <span class="token punctuation">[</span><span class="token string">&quot;/etc/execfile&quot;</span>, <span class="token string">&quot;arg1&quot;</span>, <span class="token string">&quot;arg1&quot;</span><span class="token punctuation">]</span>
注：
　　RUN指令创建的中间镜像会被缓存，并会在下次构建中使用。如果不想使用这些缓存镜像，可以在构建时指定--no-cache参数，如：docker build --no-cache
　　基于基础镜像执行，在操作时评估好基础镜像的能力
　　注意：json数组中，要使用双引号
</code></pre></div><h5 id="cmd-构建容器后调用-也就是在容器启动时才进行调用"><a href="#cmd-构建容器后调用-也就是在容器启动时才进行调用" class="header-anchor">#</a> **CMD：**构建容器后调用，也就是在容器启动时才进行调用</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    CMD <span class="token punctuation">[</span><span class="token string">&quot;executable&quot;</span>,<span class="token string">&quot;param1&quot;</span>,<span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>执行可执行文件，优先<span class="token punctuation">)</span>
    CMD <span class="token punctuation">[</span><span class="token string">&quot;param1&quot;</span>,<span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>设置了ENTRYPOINT，则直接调用ENTRYPOINT添加参数<span class="token punctuation">)</span>
    CMD <span class="token builtin class-name">command</span> param1 param2 <span class="token punctuation">(</span>执行shell内部命令<span class="token punctuation">)</span>
示例：
    CMD <span class="token builtin class-name">echo</span> <span class="token string">&quot;This is a test.&quot;</span> <span class="token operator">|</span> <span class="token function">wc</span> -
    CMD <span class="token punctuation">[</span><span class="token string">&quot;/usr/bin/wc&quot;</span>,<span class="token string">&quot;--help&quot;</span><span class="token punctuation">]</span>
注：
 　　CMD不同于RUN，CMD用于指定在容器启动时所要执行的命令，而RUN用于指定镜像构建时所要执行的命令。
</code></pre></div><h5 id="entrypoint-配置容器-使其可执行化。配合cmd可省去-application-只使用参数"><a href="#entrypoint-配置容器-使其可执行化。配合cmd可省去-application-只使用参数" class="header-anchor">#</a> **ENTRYPOINT：**配置容器，使其可执行化。配合CMD可省去&quot;application&quot;，只使用参数</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;executable&quot;</span>, <span class="token string">&quot;param1&quot;</span>, <span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>可执行文件, 优先<span class="token punctuation">)</span>
    ENTRYPOINT <span class="token builtin class-name">command</span> param1 param2 <span class="token punctuation">(</span>shell内部命令<span class="token punctuation">)</span>
示例：
    FROM ubuntu
    ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;top&quot;</span>, <span class="token string">&quot;-b&quot;</span><span class="token punctuation">]</span>
    CMD <span class="token punctuation">[</span><span class="token string">&quot;-c&quot;</span><span class="token punctuation">]</span>
注：
　　　ENTRYPOINT与CMD非常类似，不同的是通过docker run执行的命令不会覆盖ENTRYPOINT，而docker run命令中指定的任何参数，都会被当做参数再次传递给ENTRYPOINT。Dockerfile中只允许有一个ENTRYPOINT命令，多指定时会覆盖前面的设置，而只执行最后的ENTRYPOINT指令。
</code></pre></div><h5 id="user-指定运行容器时的用户名或-uid-后续的-run-也会使用指定用户。"><a href="#user-指定运行容器时的用户名或-uid-后续的-run-也会使用指定用户。" class="header-anchor">#</a> **USER：**指定运行容器时的用户名或 UID，后续的 RUN 也会使用指定用户。</h5> <p>使用USER指定用户时，可以使用用户名、UID或GID，或是两者的组合。当服务不需要管理员权限时，可以通过该命令指定运行用户。并且可以在之前创建所需要的用户</p> <div class="language-shell extra-class"><pre class="language-shell"><code>格式:
　　<span class="token environment constant">USER</span> user
　　<span class="token environment constant">USER</span> user:group
　　<span class="token environment constant">USER</span> uid
　　<span class="token environment constant">USER</span> uid:gid
　　<span class="token environment constant">USER</span> user:gid
　　<span class="token environment constant">USER</span> uid:group
 示例：
    　　<span class="token environment constant">USER</span> www
 注：
　　使用<span class="token environment constant">USER</span>指定用户后，Dockerfile中其后的命令RUN、CMD、ENTRYPOINT都将使用该用户。镜像构建完成后，通过docker run运行容器时，可以通过-u参数来覆盖所指定的用户。
</code></pre></div><h5 id="healthcheck-健康检查"><a href="#healthcheck-健康检查" class="header-anchor">#</a> **HEALTHCHECK：**健康检查</h5> <h5 id="arg-用于指定传递给构建运行时的变量"><a href="#arg-用于指定传递给构建运行时的变量" class="header-anchor">#</a> **ARG：**用于指定传递给构建运行时的变量</h5></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后编辑时间:</span> <span class="time">12/24/2020, 7:33:40 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/devops/Docker  安装系列.html" class="prev">
        Docker  安装系列
      </a></span> <span class="next"><a href="/devops/Linux.html">
        Linux
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.7ba23871.js" defer></script><script src="/assets/js/4.292afecb.js" defer></script><script src="/assets/js/57.bd724fda.js" defer></script>
  </body>
</html>
